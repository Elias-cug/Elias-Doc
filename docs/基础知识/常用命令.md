# 常用命令

## wsl 
1. wsl --install -d name 
2. wsl --unregister -d name 注销分发
3. wsl -l -v 列出当前分发及版本/查看状态
4. 运行wsl 
```js
wsl --distribution <Distribution Name> --user <User Name>
```
5. 更改发行版的默认用户
```js
<DistributionName> config --default-user <Username>
```
6. 关闭
```shell
wsl --shutdown ubuntu-22.04
```
## ubuntu

### ssh服务
1. 卸载重装ssh服务
```js
sudo apt remove openssh-server
sudo apt install openssh-server
```

2. 修改配置信息
```js
// 修改SSH Server的监听端口，这里修改为23
sudo sed -i '/Port /c Port 23' /etc/ssh/sshd_config
// 修改SSH Server的监听地址
sudo sed -i '/ListenAddress 0.0.0.0/c ListenAddress 0.0.0.0' /etc/ssh/sshd_config
// 修改SSH Server允许使用用户名密码的方式登录
sudo sed -i '/PasswordAuthentication /c PasswordAuthentication yes' /etc/ssh/sshd_config
// 修改SSH Server允许远程root用户登录
sudo sed -i '/PermitRootLogin /c PermitRootLogin yes' /etc/ssh/sshd_config
```

3. 重启ssh服务
```js 
sudo service ssh restart
```

### ubuntu安装node流程
1. 官网下载到windowns
2. 使用ssh工具移动到ubuntu 
3. 解压
```js 
xz -d xxx.tar.xz
tar xvf xxx.tar
```
4. 配置开发环境
```js 
// 修改/etc/profile文件 增加以下内容：
export NODE_HOME=/myapps/node-v10.13.0-linux-x64
export PATH=$NODE_HOME/bin:$PATH
```

5. 使用指令使环境变量生效
```js
source /etc/profile
```

6. node -v 查看

### 权限相关
1. 切换到 root 用户
```shell
su
```
2. 赋权
```shell
sudo chown -R username /path/subPath
```


### 版本信息相关
```shell
cat /proc/version
```

### apt相关
1. 安装
```shell
# 安装包
sudo apt install <packagename>
# 查看可安装的版本
sudo apt-cache madison packagename
# 安装指定版本的软件
sudo apt install packagename=版本号
```

2. 卸载
```shell
apt purge packagename
```

### vim相关
1. 查找
```shell
# 向下
:/text
# 向上
:?text
```

## Git
1. git config
修改全局配置等
```shell 
git config --global user.name "liyish"
git config --global user.email "liyish@163.com"
```

2. git commit -a 
该命令将提交git add 命令添加的所有文件，并提交git add命令之后更改的所有文件
```shell
git commit -a -m 'feat: 提交描述'
```

3. git reset 
```shell
# 回退上一次提交，将提交还原到暂存区
git reset --soft HEAD^ 

# 从stage中撤出指定文件，可以保留文件内容
git reset [file]

# 撤销指定提交之后的所有提交，并在本地保留变更
git reset [commit]

# 丢弃所有的历史记录，并回滚到指定提交
git reset --hard [commit]
```

4. git tag 
```shell
# 列出所有tag
git tag

# 新建tag
git tag -a tagName -m "my tag"

# 推送远程
git push origin v1.0

# 推送所有
git push origin --tags

# 删除tag
git tag -d tagName

# 删除远程tag
git push origin :refs/tags/tag-name
```

5. git stash
```shell
# 该命令将保存所有修改的文件
git stash save

# 该命令将恢复最近一次促藏的文件
git stash pop

# 该命令将显示stash的所有变更
git stash list

# 该命令将丢弃最近一次stash的变更
git stash drop
```

6. git rebase 
- 多次提交合并为一次提交
```shell
# 该命令将最近三次提交合并为一次提交
git rebase -i HEAD~3
```

7. git cherry-pick
- 将指定的提交（commit）应用于其他分支
```shell
git cherry-pick <commitHash>
```

## docker
> 可以到 docker hub上查找镜像

1. 镜像
```shell 
# 下载
docker pull imageName:tag
# 查看
docker images
```

2. 容器
```shell
# 制作容器 -it 表示 与容器进行交互式启动 -d 表示可后台运行容器 （守护式运行）  --name 给要运行的容器 起的名字  /bin/bash  交互路径
docker run -it -d --name 要取的别名 镜像名:Tag /bin/bash 

# 进入容器
docker exec -it containerName /bin/bash

# 查看容器
docker ps -a
```

3. 文件传递
```shell
# 容器内文件到主机，在主机执行
docker cp containerName: /usr/local/tomcat/webapps/test/js/test.js /opt

# 主机文件到容器，主机执行（未验证）
docker cp foo.txt container_id:/foo.txt
```